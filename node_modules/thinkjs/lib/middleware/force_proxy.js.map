{"version":3,"sources":["../../src/middleware/force_proxy.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBAUE,G,kBAAK;AACH,QAAI,OAAO,KAAK,IAAhB;;AAEA,QAAI,KAAK,MAAL,CAAY,UAAZ,KAA2B,KAAK,IAAL,KAAc,KAAK,QAA9C,IAA0D,CAAC,KAAK,MAApE,EAA4E;AAC1E,WAAK,KAAL,GAAa,IAAI,KAAJ,CAAU,MAAM,MAAN,CAAa,eAAb,CAAV,CAAb;AACA,aAAO,MAAM,YAAN,CAAmB,GAAnB,EAAwB,IAAxB,CAAP;AACD;AACF,G;;;EAZ0B,MAAM,UAAN,CAAiB,I","file":"force_proxy.js","sourcesContent":["'use strict';\n/**\n * force proxy\n * @type {}\n */\nexport default class extends think.middleware.base {\n  /**\n   * run\n   * @return {} []\n   */\n  run(){\n    let http = this.http;\n    //deny access by ip + port\n    if (this.config('proxy_on') && http.host !== http.hostname && !http.socket) {\n      http.error = new Error(think.locale('DISALLOW_PORT'));\n      return think.statusAction(403, http);\n    }\n  }\n}"]}